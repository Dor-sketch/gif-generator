<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video to GIF</title>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T7HFKFX0PR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-T7HFKFX0PR');
    </script>
    <!-- SEO and Metadata -->
    <meta name="author" content="Dor Pascal">
    <meta name="generator" content="vscode">
    <meta property="og:title" content="Video to GIF">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="Video to GIF Converter">
    <meta name="description"
        content="Convert videos to GIF format with this online tool. Drag & drop a video or select one from your device to convert it to GIF.">
    <meta name="keywords"
        content="video to gif, gif converter, convert video to gif, video converter, gif video, gif video converter, video to gif converter, gif, gif-generator">
    <meta property="og:description"
        content="Convert videos to GIF format with this online tool. Drag & drop a video or select one from your device to convert it to GIF.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://dorpascal.com/gif-generator/">
    <meta property="og:image" content="https://dorpascal.com/gif-generator/cover.gif">
    <meta name="twitter:card" content="summary">
    <meta property="twitter:title" content="Video to GIF Converter">
    <meta name="theme-color" content="#0055B8">
    <meta name="apple-mobile-web-app-title" content="Video to GIF Converter">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="application-name" content="Video to GIF Converter">
    <link rel="canonical" href="https://dorpascal.com/gif-generator/">

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Video to GIF Converter",
    "description": "Convert videos to GIF format with this online tool. Drag & drop a video or select one from your device to convert it to GIF.",
    "url": "https://dorpascal.com/gif-generator/",
    "operatingSystem": "Web",
    "applicationCategory": "Multimedia",
    "applicationSuite": "Video to GIF",
    "softwareRequirements": "HTML5",
    "fileFormat": "GIF",
    "fileSize": "0.00",
    "memoryRequirements": "1MB",
    "keywords": "video to gif, gif converter, convert video to gif, video converter, gif video, gif video converter, video to gif converter, gif, gif-generator",
    "browserRequirements": "HTML5",
    "image": "https://dorpascal.com/gif-generator/cover.gif",
    "author": {
        "@type": "Person",
        "name": "Dor Pascal",
        "url": "https://dorpascal.com",
        "sameAs": [
            "https://www.linkedin.com/in/dor-pascal",
            "https://github.com/Dor-sketch",
            "https://dor-sketch.itch.io/",
            "https://soundcloud.com/dor-pascal"
        ]
    },
    "datePublished": "2024-07-26",
    "dateModified": "2024-07-27",
    "license": "https://opensource.org/licenses/MIT",
    "potentialAction": {
        "@type": "Action",
        "target": {
            "@type": "EntryPoint",
            "urlTemplate": "https://dorpascal.com/gif-generator/",
            "actionPlatform": [
                "http://schema.org/DesktopWebPlatform",
                "http://schema.org/MobileWebPlatform"
            ]
        },
        "name": "Convert"
    },
    "offers": {
        "@type": "Offer",
        "price": "0.00",
        "priceCurrency": "USD",
        "eligibleRegion": {
            "@type": "Place",
            "name": "Worldwide"
        }
    },
    "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.5",
        "reviewCount": "24"
    },
    "softwareVersion": "1.0.0",
    "applicationSubCategory": "MultimediaApplication",
    "featureList": [
        "Drag & drop video upload",
        "Supports multiple video formats",
        "Customizable GIF settings",
        "High-quality output"
    ],
    "screenshot": [
        "https://dorpascal.com/gif-generator/screenshots/screenshot1.png",
        "https://dorpascal.com/gif-generator/screenshots/screenshot2.png"
    ]
}
</script>
    <link href="https://fonts.googleapis.com/css2?family=David+Libre:wght@400;700&display=swap" rel="stylesheet">

    <!-- Icons and Manifest -->
    <link type="image/png" sizes="16x16" rel="icon" href="./icons/Web/icons8-gif-color-16.png">
    <link type="image/png" sizes="32x32" rel="icon" href="./icons/Web/icons8-gif-color-32.png">
    <link type="image/png" sizes="96x96" rel="icon" href="./icons/Web/icons8-gif-color-96.png">
    <link type="image/png" sizes="120x120" rel="icon" href="./icons/Web/icons8-gif-color-120.png">
    <link rel="icon" type="image/png" sizes="72x72" href="./icons/Android-Chrome/icons8-gif-color-72.png">
    <link rel="icon" type="image/png" sizes="96x96" href="./icons/Android-Chrome/icons8-gif-color-96.png">
    <link rel="icon" type="image/png" sizes="144x144" href="./icons/Android-Chrome/icons8-gif-color-144.png">
    <link rel="icon" type="image/png" sizes="192x192" href="./icons/Android-Chrome/icons8-gif-color-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="./icons/Android-Chrome/icons8-gif-color-512.png">
    <link rel="apple-touch-icon" type="image/png" sizes="57x57"
        href="./icons/iOS-Safari-Web-Clip/icons8-gif-color-57.png">
    <link rel="apple-touch-icon" type="image/png" sizes="60x60"
        href="./icons/iOS-Safari-Web-Clip/icons8-gif-color-60.png">
    <link rel="apple-touch-icon" type="image/png" sizes="72x72"
        href="./icons/iOS-Safari-Web-Clip/icons8-gif-color-72.png">
    <link rel="apple-touch-icon" type="image/png" sizes="76x76"
        href="./icons/iOS-Safari-Web-Clip/icons8-gif-color-76.png">
    <link rel="apple-touch-icon" type="image/png" sizes="114x114"
        href="./icons/iOS-Safari-Web-Clip/icons8-gif-color-114.png">
    <link rel="apple-touch-icon" type="image/png" sizes="120x120"
        href="./icons/iOS-Safari-Web-Clip/icons8-gif-color-120.png">
    <link rel="apple-touch-icon" type="image/png" sizes="144x144"
        href="./icons/iOS-Safari-Web-Clip/icons8-gif-color-144.png">
    <link rel="apple-touch-icon" type="image/png" sizes="152x152"
        href="./icons/iOS-Safari-Web-Clip/icons8-gif-color-152.png">
    <link rel="apple-touch-icon" type="image/png" sizes="180x180"
        href="./icons/iOS-Safari-Web-Clip/icons8-gif-color-180.png">
    <link color="#26E07F" rel="mask-icon" href="./icons/macOS/icons8-gif-color-60.svg">
    <meta name="msapplication-square70x70logo" content="./icons/icons8-gif-color-70.png">
    <meta name="msapplication-TileImage" content="./icons/icons8-gif-color-144.png">
    <meta name="msapplication-square150x150logo" content="./icons/Windows/icons8-gif-color-150.png">
    <meta name="msapplication-square310x310logo" content="./icons/Windows/icons8-gif-color-310.png">
    <meta name="msapplication-TileColor" content="#C0FFEE">
    <meta name="application-name" content="Video to GIF Converter">
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: calc(100vh - 20px);
            margin: 0;
            background-color: #f0f0f0;
            flex-direction: column;
            overflow-x: hidden;
        }

        h1 {
            color: #f0f0f0;
            font-size: x-large;
            font-weight: 400;
            margin: 0;
            text-transform: uppercase;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        }

        .container {
            text-align: center;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 500px;
        }

        #dropArea {
            border: 2px dashed #ccc;
            padding: 20px;
            margin-bottom: 20px;
            transition: border-color 0.3s;
            position: relative;
        }

        #dropArea.hover {
            border-color: #000;
        }

        .preview video {
            max-width: 100%;
            height: auto;
        }

        button {
            background-color: #0068de;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 5px;
            font-size: 16px;
        }

        button:hover {
            background-color: #0056b3;
        }

        .settings {
            margin: 20px 0;
            text-align: left;
        }

        .settings label {
            display: block;
            margin-bottom: 10px;
        }

        footer {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        footer .footer-links {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
        }

        footer .footer-links a {
            margin: 0 5px;
            color: #6A6A6ADB;
            text-decoration: none;
            transition: color 0.3s;
        }

        footer .footer-links a:hover,
        footer .footer-links a:focus,
        footer .footer-links a:active {
            color: #0055B8;
        }

        footer svg {
            fill: #6A6A6ADB;
            transition: all 0.3s;
            width: 24px;
            height: 24px;
        }

        footer svg:hover {
            fill: #0055B8;
            transform: scale(1.2) translateY(-2px);
        }

        footer p {
            color: #6A6A6ADB;
            font-size: 14px;
        }

        footer a {
            color: #0055B8;
            transition: color 0.3s;
        }

        footer a:hover {
            text-decoration: underline;
            color: #0056b3;
        }

        @media (max-width: 600px) {
            .container {
                padding: 10px;
                width: calc(100% - 30px);
                margin: 0;
            }

            h1 {
                font-size: large;
            }

            footer p {
                display: none;
            }

            footer .footer-links {
                margin-top: 10px;
            }
        }

        @media (max-width: 400px) {
            button {
                width: calc(min(100vw, 500px) - 40px);
            }
        }

        #videoPreview,
        #outputGif {
            margin: 0 auto;
            max-width: 100%;
        }

        #status {
            margin-top: 10px;
            font-style: italic;
        }

        input {
            font-size: 16px;
        }



        /* Center the video input element */
        #videoInput {
            margin: 20px auto;
        }

        header {
            background-color: #0055B8;
            color: #fff;
            padding: 10px 0;
            text-align: center;
            width: 100%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.21);
        }

        select {
            font-size: 16px;
        }

        /* Hide the default file input */
        .file-input {
            display: none;
        }

        #outputGif:hover {
            scale: 1.1;
        }

        /* Style the custom file input label */
        .file-input-label {
            display: inline-block;
            padding: 10px 20px;
            background-color: #0055B8;
            color: #fff;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            text-align: center;
            margin-top: 10px;
            transition: background-color 0.3s;
        }

        .file-input-label:hover {
            background-color: #003164;
        }

        /* Style the file name display */
        .file-name {
            display: block;
            margin-top: 10px;
            font-size: 14px;
            color: #555;
        }

        /* Center the file input container */
        .file-input-container {
            text-align: center;
            margin: 20px auto;
        }

        /* Modal styles */
        .modal {
            display: none;
            /* Hidden by default */
            position: fixed;
            /* Stay in place */
            z-index: 1;
            /* Sit on top */
            left: 0;
            top: 0;
            width: 100%;
            /* Full width */
            height: 100%;
            /* Full height */
            overflow: auto;
            /* Enable scroll if needed */
            background-color: rgb(0, 0, 0);
            /* Fallback color */
            background-color: rgba(0, 0, 0, 0.4);
            /* Black w/ opacity */
        }

        /* Modal content */
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            /* 15% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            /* Could be more or less, depending on screen size */
            border-radius: 10px;

        }

        /* Close button */
        .close-btn {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            transition: color 0.3s;
        }

        .close-btn:hover,
        .close-btn:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <header>
        <h1>GIF Generator</h1>
    </header>
    <div class="container">
        <div class="file-input-container" id="videoInput">
            <input type="file" id="fileInput" class="file-input" />
            <label for="fileInput" class="file-input-label">Choose File</label>
            <span id="fileName" class="file-name">No file selected</span>
        </div>
        <div id="videoContainer" style="position: relative;">
            <video id="videoPreview" controls style="display: none;" class="preview" playsinline autoplay muted></video>
            <div id="textOverlayPreview" style="position: absolute; pointer-events: none;"></div>
        </div>
<button id="convertBtn" disabled style="display: none;" onclick="convertToGif()" title="Convert to GIF">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
        <path d="M14.5 2.5l1 3.5h3.5l-2.75 2 1 3.5-2.75-2-2.75 2 1-3.5-2.75-2h3.5l1-3.5zm-1.5 9l-9 9 1.5 1.5 9-9-1.5-1.5zm-6 6l-1.5 1.5 1.5 1.5 1.5-1.5-1.5-1.5z"/>
    </svg>
    Convert to GIF
</button>
        <img id="outputGif" style="display: none;">
        <div id="status"></div>

        <!-- Trigger button to open the modal -->
<button id="openModalBtn" style="display: none;">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
        <path d="M19.14,12.94a7.14,7.14,0,0,0,0-1.88l2.11-1.65a.5.5,0,0,0,.12-.64l-2-3.46a.5.5,0,0,0-.61-.22l-2.49,1a7.16,7.16,0,0,0-1.62-.94l-.38-2.65A.5.5,0,0,0,13.5,3h-4a.5.5,0,0,0-.5.42l-.38,2.65a7.16,7.16,0,0,0-1.62.94l-2.49-1a.5.5,0,0,0-.61.22l-2,3.46a.5.5,0,0,0,.12.64l2.11,1.65a7.14,7.14,0,0,0,0,1.88L2.86,14.59a.5.5,0,0,0-.12.64l2,3.46a.5.5,0,0,0,.61.22l2.49-1a7.16,7.16,0,0,0,1.62.94l.38,2.65a.5.5,0,0,0,.5.42h4a.5.5,0,0,0,.5-.42l.38-2.65a7.16,7.16,0,0,0,1.62-.94l2.49,1a.5.5,0,0,0,.61-.22l2-3.46a.5.5,0,0,0-.12-.64ZM12,15.5A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"/>
    </svg>
</button>
        <!-- Modal structure -->
        <div id="textArea" class="form-group" style="display: none;">
            <label for="textOverlay">Add Text (Optional):</label>
            <input type="text" id="textOverlay" placeholder="Enter text to overlay on GIF">
        </div>
        <div id="settingsModal" class="modal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <div class="settings">

                    <label for="textFont">Text Font:</label>
                    <select id="textFont">
                        <option value="Arial">Arial</option>
                        <option value="Comic Sans MS">Comic Sans MS</option>
                        <option value="Verdana">Verdana</option>
                        <option value="Tahoma">Tahoma</option>
                        <option value="Times New Roman">Times New Roman</option>
                        <option value="Courier New">Courier New</option>
                        <option value="'David Libre', sans-serif">David Libre</option>
                    </select>

                    <select id="textDecoration">
                        <option value="none">None</option>
                        <option value="underline">Underline</option>
                        <option value="overline">Overline</option>
                        <option value="line-through">Line-through</option>
                    </select>

                    <label for="textSize">Text Size:</label>
                    <input type="number" id="textSize" value="32">

                    <label for="textColor">Text Color:</label>
                    <input type="color" id="textColor" value="#000000">

                    <label for="textPosition">Text Position:</label>
                    <select id="textPosition">
                        <option value="center">Center</option>
                        <option value="top-left">Top Left</option>
                        <option value="top-right">Top Right</option>
                        <option value="bottom-left">Bottom Left</option>
                        <option value="bottom-right">Bottom Right</option>
                    </select>

                    <label for="textBorderWidth">Text Border Width:</label>
                    <input type="number" id="textBorderWidth" value="1" min="0">

                    <label for="textBorderColor">Text Border Color:</label>
                    <input type="color" id="textBorderColor" value="#000000">

                    <label for="textWheight">Text Wheight:</label>
                    <select id="textWheight">
                        <option value="700">700</option>
                        <option value="100">100</option>
                        <option value="200">200</option>
                        <option value="300">300</option>
                        <option value="400">400</option>
                        <option value="500">500</option>
                        <option value="600">600</option>
                        <option value="800">800</option>
                        <option value="900">900</option>
                    </select>

                    <label for="gifQuality">GIF Quality:</label>
                    <input type="range" id="gifQuality" min="1" max="100" value="100">

                    <label for="gifSpeed">GIF Speed (FPS):</label>
                    <input type="number" id="gifSpeed" value="10">
                </div>
            </div>
        </div>
    </div>
    <footer>
        <div class="footer-links">
            <a href="https://www.github.com/Dor-sketch" aria-label="Dor Pascal on GitHub" target="_blank"
                rel="noopener">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" aria-hidden="true" focusable="false"
                    class="fab fa-github">
                    <path
                        d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z">
                    </path>
                </svg>
            </a>
            <a href="https://dorpascal.com" aria-label="Dor Pascal's Portfolio" target="_blank" rel="noopener">
                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0,0,256,256">
                    <g transform="translate(38.4,38.4) scale(0.7,0.7)">
                        <g fill="none" fill-rule="nonzero" stroke="#808080" stroke-width="8" stroke-linecap="butt"
                            stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0"
                            font-family="none" font-size="none" style="mix-blend-mode: normal">
                            <path
                                d="M-14.08963,305.61204c-19.61848,0-35.52241,-15.90392-35.52241,-35.52241v-284.17926c0,-19.61848 15.90392,-35.52241 35.52241,-35.52241h284.17926c19.61848,0 35.52241,15.90392 35.52241,35.52241v284.17926c0,19.61848-15.90392,35.52241-35.52241,35.52241z"
                                id="shape"></path>
                        </g>
                        <g fill-opacity="0.85882" fill-rule="nonzero" stroke="none" stroke-width="1"
                            stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray=""
                            stroke-dashoffset="0" font-family="none" font-size="none" style="mix-blend-mode: normal">
                            <g transform="scale(8,8)">
                                <rect x="5" y="2" width="4" height="28"></rect>
                                <path
                                    d="M19,2h-8v4h8c2.206,0 4,1.794 4,4v12c0,2.206-1.794,4-4,4h-8v4h8c4.411,0 8,-3.589 8,-8v-12c0,-4.411-3.589,-8-8,-8z">
                                </path>
                            </g>
                        </g>
                    </g>
                </svg>
            </a>
        </div>
        <p>Built by <a href="https://dorpascal.com" target="_blank" rel="noopener">Dor Pascal</a> &copy; 2024</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.js"></script>
    <script>
    document.getElementById('textOverlay').addEventListener('input', function() {
    document.getElementById('footer').style.display = 'none';
});
        // Get the modal
        var modal = document.getElementById("settingsModal");

        // Get the button that opens the modal
        var btn = document.getElementById("openModalBtn");

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close-btn")[0];

        // When the user clicks the button, open the modal
        btn.onclick = function () {
            modal.style.display = "block";
        }

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
        const videoInput = document.getElementById('videoInput');
        const videoPreview = document.getElementById('videoPreview');
        const textOverlayPreview = document.getElementById('textOverlayPreview');
        const convertBtn = document.getElementById('convertBtn');
        const outputGif = document.getElementById('outputGif');
        const status = document.getElementById('status');

        const textOverlay = document.getElementById('textOverlay');
        const textFont = document.getElementById('textFont');
        const textSize = document.getElementById('textSize');
        const textDecoration = document.getElementById('textDecoration');
        const textColor = document.getElementById('textColor');
        const textPosition = document.getElementById('textPosition');
        const gifQuality = document.getElementById('gifQuality');
        const gifSpeed = document.getElementById('gifSpeed');
        const textBorderWidth = document.getElementById('textBorderWidth');
        const textBorderColor = document.getElementById('textBorderColor');
        const textWheight = document.getElementById('textWheight');

        function updateTextOverlay() {
            textOverlayPreview.textContent = textOverlay.value;
            textOverlayPreview.style.font = `${textSize.value}px ${textFont.value}`;
            textOverlayPreview.style.color = textColor.value;
            textOverlayPreview.style.textDecoration = textDecoration.value;
            textOverlayPreview.style.webkitTextStrokeWidth = `${textBorderWidth.value}px`;
            textOverlayPreview.style.webkitTextStrokeColor = textBorderColor.value;
            textOverlayPreview.style.fontWeight = textWheight.value;
            textOverlayPreview.style.textShadow = `${textBorderWidth.value}px ${textBorderWidth.value}px ${textBorderWidth.value}px ${textBorderColor.value}`;
            // Position the text
            switch (textPosition.value) {
                case 'top-left':
                    textOverlayPreview.style.top = '10px';
                    textOverlayPreview.style.left = '10px';
                    textOverlayPreview.style.right = 'auto';
                    textOverlayPreview.style.bottom = 'auto';
                    textOverlayPreview.style.textAlign = 'left';
                    break;
                case 'top-right':
                    textOverlayPreview.style.top = '10px';
                    textOverlayPreview.style.right = '10px';
                    textOverlayPreview.style.left = 'auto';
                    textOverlayPreview.style.bottom = 'auto';
                    textOverlayPreview.style.textAlign = 'right';
                    break;
                case 'bottom-left':
                    textOverlayPreview.style.bottom = '10px';
                    textOverlayPreview.style.left = '10px';
                    textOverlayPreview.style.top = 'auto';
                    textOverlayPreview.style.right = 'auto';
                    textOverlayPreview.style.textAlign = 'left';
                    break;
                case 'bottom-right':
                    textOverlayPreview.style.bottom = '10px';
                    textOverlayPreview.style.right = '10px';
                    textOverlayPreview.style.top = 'auto';
                    textOverlayPreview.style.left = 'auto';
                    textOverlayPreview.style.textAlign = 'right';
                    break;
                case 'center':
                    textOverlayPreview.style.top = '50%';
                    textOverlayPreview.style.left = '50%';
                    textOverlayPreview.style.transform = 'translate(-50%, -50%)';
                    textOverlayPreview.style.textAlign = 'center';
                    break;
            }
        }

        videoInput.addEventListener('change', function (e) {
            // hide fileInput and show settings
            document.getElementById('convertBtn').style.display = 'block';
            document.getElementById('videoInput').style.display = 'none';
            document.getElementById('fileName').textContent = e.target.files[0].name;
            document.getElementById('openModalBtn').style.display = 'block';
            document.getElementById('textArea').style.display = 'block';
            const file = e.target.files[0];
            if (file) {
                const videoUrl = URL.createObjectURL(file);
                videoPreview.src = videoUrl;
                videoPreview.style.display = 'block';
                textOverlayPreview.style.display = 'block';
                convertBtn.disabled = false;
                updateTextOverlay();
            }

            // update text overlay when video is loaded so that settings will match the video dimensions
            // update text color to match the video: get the average color of the video
            // update text color to match the video: get the average color of the video
            videoPreview.addEventListener('loadeddata', function () {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = videoPreview.videoWidth;
                canvas.height = videoPreview.videoHeight;
                ctx.drawImage(videoPreview, 0, 0, canvas.width, canvas.height);

                // Debug: Check if the canvas is drawing correctly
                document.body.appendChild(canvas); // Append canvas to body to visually inspect it

                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
                let r = 0, g = 0, b = 0;
                for (let i = 0; i < imageData.length; i += 4) {
                    r += imageData[i];
                    g += imageData[i + 1];
                    b += imageData[i + 2];
                }
                r = Math.round(r / (imageData.length / 4));
                g = Math.round(g / (imageData.length / 4));
                b = Math.round(b / (imageData.length / 4));
                console.log(r, g, b);
                textColor.value = `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
                console.log(textColor.value);
                updateTextOverlay();
                // Remove the canvas from the body
                document.body.removeChild(canvas);


                // set default frames based on video duration: for longer videos, reduce the FPS
                const duration = Math.round(videoPreview.duration);
                if (duration > 10) {
                    gifSpeed.value = 5;
                }
                else if (duration > 5) {
                    gifSpeed.value = 10;
                }
                else {
                    gifSpeed.value = 15;
                }
            });


        });

        // Add event listeners to update text overlay when settings change
        textOverlay.addEventListener('input', updateTextOverlay);
        textFont.addEventListener('change', updateTextOverlay);
        textSize.addEventListener('input', updateTextOverlay);
        textColor.addEventListener('input', updateTextOverlay);
        textPosition.addEventListener('change', updateTextOverlay);
        textDecoration.addEventListener('change', updateTextOverlay);
        textBorderWidth.addEventListener('input', updateTextOverlay);
        textBorderColor.addEventListener('input', updateTextOverlay);
        textWheight.addEventListener('change', updateTextOverlay);
function showControls() {
    videoPreview.controls = true;
    convertBtn.style.display = 'block';
}

function convertToGif() {
    console.log('Converting to GIF...');
    const video = videoPreview;
    convertBtn.disabled = true;
    status.textContent = 'Converting...';


    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');

    video.addEventListener('loadedmetadata', function () {
        const aspectRatio = video.videoWidth / video.videoHeight;
        // choose size based on quality
        let baseSize = video.videoWidth;
        baseSize = Math.round(gifQuality.value / 100 * baseSize);
        canvas.width = Math.min(640, baseSize);
        canvas.height = Math.round(canvas.width / aspectRatio);

        // Draw the first frame to get the correct dimensions
        requestAnimationFrame(function () {
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            startConverting();
        });
    });

    function startConverting() {
    // stop the video
    video.pause();
        const gif = new GIF({
            workers: 2,
            quality: 10,
            width: canvas.width,
            height: canvas.height,
        });

        const duration = Math.round(video.duration);
        const fps = parseInt(gifSpeed.value); // Frames per second
        const totalFrames = duration * fps - 1;

        let currentFrame = 0;

        function addFrame() {
            if (currentFrame < totalFrames) {
                video.currentTime = (currentFrame / fps);
                video.onseeked = () => {
                    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

                    // Add text overlay
                    if (textOverlay.value) {
                        ctx.font = `${textWheight.value} ${textSize.value}px ${textFont.value}`;
                        ctx.textBaseline = 'middle';
                        ctx.fillStyle = textColor.value;
                        ctx.strokeStyle = textBorderColor.value;
                        ctx.lineWidth = textBorderWidth.value;
                        // update font weight

                        let x, y;
                        switch (textPosition.value) {
                            case 'top-left':
                                x = 10;
                                y = 30;
                                break;
                            case 'top-right':
                                x = canvas.width - ctx.measureText(textOverlay.value).width - 10;
                                y = 30;
                                break;
                            case 'bottom-left':
                                x = 10;
                                y = canvas.height - 10;
                                break;
                            case 'bottom-right':
                                x = canvas.width - ctx.measureText(textOverlay.value).width - 10;
                                y = canvas.height - 10;
                                break;
                            case 'center':
                                x = (canvas.width - ctx.measureText(textOverlay.value).width) / 2;
                                y = (canvas.height + parseInt(textSize.value)) / 2;
                                break;
                        }
                        ctx.fillText(textOverlay.value, x, y);
                        ctx.strokeText(textOverlay.value, x, y);
                    }

                    gif.addFrame(ctx, { copy: true, delay: 100 });
                    currentFrame++;
                    status.textContent = `Converting... ${Math.min(Math.round((currentFrame / totalFrames) * 100),100)}%`;

                    if (currentFrame < totalFrames) {
                        addFrame();
                    } else {
                        gif.render();
                    }
                };
            } else {
                gif.render();
            }
        }

        gif.on('finished', function (blob) {
            const gifUrl = URL.createObjectURL(blob);

            // Create the download link
            const a = document.createElement('a');
            a.href = gifUrl;
            a.download = 'output.gif';

            // Create the GIF image
            const gifImage = document.createElement('img');
            gifImage.src = gifUrl;
            gifImage.style.display = 'block';
            gifImage.style.margin = '20px auto';
            gifImage.style.maxWidth = '100%';

            // Append the GIF image inside the download link
            a.appendChild(gifImage);

            // Update the status text and append the download link
            status.textContent = 'Done! Click the GIF to download.';
            status.appendChild(a);

            // Hide video and settings
            document.getElementById('videoContainer').style.display = 'none';
            document.getElementById('textArea').style.display = 'none';
            // Enable the convert button
            convertBtn.disabled = false;

            // add refresh button
            const refreshBtn = document.createElement('button');
            refreshBtn.textContent = 'Convert Another Video';
            refreshBtn.style.display = 'block';
            refreshBtn.style.margin = '20px auto';
            refreshBtn.addEventListener('click', () => {
                location.reload();
            });
            status.appendChild(refreshBtn);

        });

        video.currentTime = 0;
        addFrame();
    }

    // Trigger the loadedmetadata event if the video is already loaded
    if (video.readyState >= 2) {
        video.dispatchEvent(new Event('loadedmetadata'));
    }
}

    </script>
</body>

</html>